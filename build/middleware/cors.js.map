{"version":3,"file":"cors.js","sourceRoot":"","sources":["../../src/middleware/cors.ts"],"names":[],"mappings":";;;;;;AAAA,gDAAuB;AAEvB,MAAM,gBAAgB,GAAG;IACvB,uBAAuB;IACvB,uBAAuB;IACvB,uBAAuB;IACvB,kCAAkC;CACnC,CAAA;AAEM,MAAM,cAAc,GAAG,CAAC,EAAE,eAAe,GAAG,gBAAgB,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,IAAA,cAAI,EAAC;IAClF,MAAM,EAAE,CAAC,MAA0B,EAAE,QAAsD,EAAE,EAAE;QAC7F,IAAG,eAAe,CAAC,QAAQ,CAAC,MAAgB,CAAC;YAAE,OAAO,QAAQ,CAAC,IAAI,EAAC,IAAI,CAAC,CAAC;QAC1E,IAAG,CAAC,MAAM;YAAE,OAAO,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;QACvC,OAAO,QAAQ,CAAC,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC,CAAA;IACnD,CAAC;IACD,OAAO,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,OAAO,EAAC,QAAQ,EAAC,SAAS,CAAE;IACrD,cAAc,EAAE,CAAC,cAAc,EAAE,eAAe,CAAC;IACjD,WAAW,EAAE,IAAI;CAClB,CAAC,CAAA;AATW,QAAA,cAAc,kBASzB","sourcesContent":["import cors from 'cors'\r\n\r\nconst ACCEPTED_ORIGINS = [\r\n  'http://localhost:1234',\r\n  'http://localhost:9876',\r\n  'http://localhost:4200',\r\n  'https://webshoptesis.netlify.app'\r\n]\r\n\r\nexport const corsMiddleware = ({ acceptedOrigins = ACCEPTED_ORIGINS } = {}) => cors({\r\n  origin: (origin: string | undefined, callback: (arg0: Error | null, arg1?: boolean) => void) => {\r\n    if(acceptedOrigins.includes(origin as string)) return callback(null,true);\r\n    if(!origin) return callback(null, true)\r\n    return callback(new Error(\"Not allowed by CORS\"))\r\n  },\r\n  methods: ['GET', 'POST', 'PATCH','DELETE','OPTIONS' ],\r\n  allowedHeaders: ['Content-Type', 'Authorization'],\r\n  credentials: true\r\n})"]}