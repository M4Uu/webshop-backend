{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,sBAiCC;AA3CD,sDAA8B;AAC9B,wCAAgD;AAChD,4CAAmD;AAGnD,kEAAwC;AACxC,+CAAiC;AAEjC,MAAM,CAAC,MAAM,EAAE,CAAC;AAEhB,SAAwB,GAAG,CAAC,SAAyC;IAEnE,MAAM,GAAG,GAAG,IAAA,iBAAO,GAAE,CAAA;IACrB,GAAG,CAAC,GAAG,CAAC,iBAAO,CAAC,IAAI,EAAE,CAAC,CAAA;IACvB,GAAG,CAAC,GAAG,CAAC,IAAA,qBAAc,GAAE,CAAC,CAAA;IAEzB,MAAM,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC;IAEzC,GAAG,CAAC,OAAO,CAAC,cAAc,CAAC,CAAA;IAC3B,GAAG,CAAC,GAAG,CAAC,IAAA,uBAAY,GAAE,CAAC,CAAA;IAEvB,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,KAAK,EAAE,GAAG,EAAE,EAAE;QAC7B,GAAG,CAAC,IAAI,CAAC;YACP,MAAM,EAAE,iBAAiB;YACzB,OAAO,EAAE,qBAAqB;YAC9B,SAAS,EAAE;gBACT,KAAK,EAAE,QAAQ;aAChB;SACF,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,GAAG,CAAC,GAAG,CAAC,YAAY,EAAE,IAAA,uBAAgB,EAAC,SAAS,CAAC,CAAC,CAAA;IAClD,GAAG,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,KAAK,EAAE,GAAG,EAAE,EAAE;QAChC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACnB,MAAM,EAAE,IAAI;YACZ,MAAM,EAAE,OAAO,CAAC,WAAW,EAAE;YAC7B,MAAM,EAAE,OAAO,CAAC,MAAM,EAAE;SACzB,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,EAAE;QACpB,OAAO,CAAC,GAAG,CAAC,0BAA0B,IAAI,EAAE,CAAC,CAAA;IAC/C,CAAC,CAAC,CAAA;AACJ,CAAC","sourcesContent":["import express from \"express\";\r\nimport { createUserRouter } from \"./routes/user\"\r\nimport { corsMiddleware } from \"./middleware/cors\";\r\nimport { UserModel } from \"./models/mysql/users\";\r\nimport { UserModel as UserPostgre } from \"./models/postgre/users\";\r\nimport cookieParser from 'cookie-parser'\r\nimport * as dotenv from 'dotenv';\r\n\r\ndotenv.config();\r\n\r\nexport default function App(userModel: typeof UserModel | UserPostgre) {\r\n\r\n  const app = express()\r\n  app.use(express.json())\r\n  app.use(corsMiddleware())\r\n\r\n  const port = process.env[\"PORT\"] || 3312;\r\n\r\n  app.disable('x-powered-by')\r\n  app.use(cookieParser())\r\n\r\n  app.get(\"/api\", (__req, res) => {\r\n    res.json({\r\n      status: \"API funcionando\",\r\n      message: \"Bienvenido a mi API\",\r\n      endpoints: {\r\n        users: \"/users\"\r\n      }\r\n    });\r\n  });\r\n\r\n  app.use('/api/users', createUserRouter(userModel))\r\n  app.get('/health', (__req, res) => {\r\n    res.status(200).json({\r\n      status: 'OK',\r\n      memory: process.memoryUsage(),\r\n      uptime: process.uptime()\r\n    });\r\n  });\r\n\r\n  app.listen(port, () => {\r\n    console.log(`Server running on port ${port}`)\r\n  })\r\n}"]}